{
  "phase": "complete",
  "models": [
    {
      "name": "stg_customers",
      "status": "completed",
      "attempts": 1,
      "errors": [],
      "validation_score": 0.95,
      "source_object": "dbo.customers",
      "file_path": null
    },
    {
      "name": "stg_orders",
      "status": "completed",
      "attempts": 1,
      "errors": [],
      "validation_score": 0.95,
      "source_object": "dbo.orders",
      "file_path": null
    },
    {
      "name": "stg_order_items",
      "status": "completed",
      "attempts": 1,
      "errors": [],
      "validation_score": 0.95,
      "source_object": "dbo.order_items",
      "file_path": null
    },
    {
      "name": "stg_products",
      "status": "completed",
      "attempts": 1,
      "errors": [],
      "validation_score": 0.95,
      "source_object": "dbo.products",
      "file_path": null
    },
    {
      "name": "stg_vw_customer_orders",
      "status": "completed",
      "attempts": 1,
      "errors": [],
      "validation_score": 0.95,
      "source_object": "dbo.vw_customer_orders",
      "file_path": null
    },
    {
      "name": "rpt_getcustomerorders",
      "status": "completed",
      "attempts": 1,
      "errors": [],
      "validation_score": 0.95,
      "source_object": "dbo.usp_GetCustomerOrders",
      "file_path": null
    },
    {
      "name": "rpt_calculaterevenue",
      "status": "completed",
      "attempts": 1,
      "errors": [],
      "validation_score": 0.95,
      "source_object": "dbo.usp_CalculateRevenue",
      "file_path": null
    }
  ],
  "current_model_index": 7,
  "completed_count": 7,
  "failed_count": 0,
  "assessment_complete": true,
  "plan_complete": true,
  "assessment": {
    "total_objects": 7,
    "tables": [
      {
        "full_name": "dbo.customers",
        "schema": "dbo",
        "name": "customers",
        "type": "USER_TABLE",
        "complexity": 1,
        "priority": 1,
        "row_count": 50000,
        "column_count": 5,
        "dependency_count": 0,
        "recommendation": "migrate_as_source_and_staging",
        "migrate": true
      },
      {
        "full_name": "dbo.orders",
        "schema": "dbo",
        "name": "orders",
        "type": "USER_TABLE",
        "complexity": 2,
        "priority": 2,
        "row_count": 150000,
        "column_count": 5,
        "dependency_count": 1,
        "recommendation": "migrate_as_source_and_staging",
        "migrate": true
      },
      {
        "full_name": "dbo.order_items",
        "schema": "dbo",
        "name": "order_items",
        "type": "USER_TABLE",
        "complexity": 2,
        "priority": 2,
        "row_count": 400000,
        "column_count": 5,
        "dependency_count": 2,
        "recommendation": "migrate_as_source_and_staging",
        "migrate": true
      },
      {
        "full_name": "dbo.products",
        "schema": "dbo",
        "name": "products",
        "type": "USER_TABLE",
        "complexity": 0,
        "priority": 1,
        "row_count": 5000,
        "column_count": 4,
        "dependency_count": 0,
        "recommendation": "migrate_as_source_and_staging",
        "migrate": true
      },
      {
        "full_name": "dbo.vw_customer_orders",
        "schema": "dbo",
        "name": "vw_customer_orders",
        "type": "VIEW",
        "complexity": 0,
        "priority": 2,
        "row_count": 0,
        "column_count": 4,
        "dependency_count": 2,
        "recommendation": "migrate_as_view",
        "migrate": true
      }
    ],
    "procedures": [
      {
        "full_name": "dbo.usp_GetCustomerOrders",
        "schema": "dbo",
        "name": "usp_GetCustomerOrders",
        "type": "PROCEDURE",
        "complexity": 0,
        "priority": 4,
        "line_count": 15,
        "dependency_count": 1,
        "recommendation": "convert_to_dbt_model",
        "migrate": true
      },
      {
        "full_name": "dbo.usp_CalculateRevenue",
        "schema": "dbo",
        "name": "usp_CalculateRevenue",
        "type": "PROCEDURE",
        "complexity": 0,
        "priority": 4,
        "line_count": 16,
        "dependency_count": 3,
        "recommendation": "convert_to_dbt_model",
        "migrate": true
      }
    ],
    "strategy": {
      "approach": "Iterative migration starting with base tables",
      "phases": [
        {
          "phase": 1,
          "name": "Base Tables",
          "description": "Migrate tables with no dependencies first"
        },
        {
          "phase": 2,
          "name": "Dependent Tables",
          "description": "Migrate tables with dependencies"
        },
        {
          "phase": 3,
          "name": "Views",
          "description": "Convert views to dbt models"
        },
        {
          "phase": 4,
          "name": "Stored Procedures",
          "description": "Convert simple procedures to dbt models"
        }
      ],
      "estimated_duration": "2-4 weeks",
      "risk_factors": [
        "Complex stored procedures may require manual conversion",
        "Data validation needed for all models",
        "Performance optimization may be required"
      ],
      "recommendations": [
        "Start with tables that have no dependencies",
        "Validate each model before proceeding",
        "Focus on business-critical tables first"
      ]
    },
    "recommendations": [
      "\ud83d\udccb 2 stored procedures recommended for conversion. Review business logic carefully.",
      "\u2705 Start with base tables (no dependencies) for quickest wins",
      "\ud83e\uddea Implement data quality tests for all migrated models"
    ]
  },
  "planning": {
    "models": [
      {
        "name": "stg_customers",
        "source_object": "dbo.customers",
        "source_type": "TABLE",
        "target_type": "model",
        "materialization": "table",
        "dependencies": [],
        "transformations": [
          "Create source definition",
          "Create staging model with basic transformations",
          "Add freshness tests",
          "Add data quality tests"
        ],
        "priority": 1
      },
      {
        "name": "stg_orders",
        "source_object": "dbo.orders",
        "source_type": "TABLE",
        "target_type": "model",
        "materialization": "table",
        "dependencies": [],
        "transformations": [
          "Create source definition",
          "Create staging model with basic transformations",
          "Add freshness tests",
          "Add data quality tests"
        ],
        "priority": 2
      },
      {
        "name": "stg_order_items",
        "source_object": "dbo.order_items",
        "source_type": "TABLE",
        "target_type": "model",
        "materialization": "table",
        "dependencies": [],
        "transformations": [
          "Create source definition",
          "Create staging model with basic transformations",
          "Add freshness tests",
          "Add data quality tests"
        ],
        "priority": 2
      },
      {
        "name": "stg_products",
        "source_object": "dbo.products",
        "source_type": "TABLE",
        "target_type": "model",
        "materialization": "table",
        "dependencies": [],
        "transformations": [
          "Create source definition",
          "Create staging model with basic transformations",
          "Add freshness tests",
          "Add data quality tests"
        ],
        "priority": 1
      },
      {
        "name": "stg_vw_customer_orders",
        "source_object": "dbo.vw_customer_orders",
        "source_type": "VIEW",
        "target_type": "model",
        "materialization": "view",
        "dependencies": [
          "dbo.customers",
          "dbo.orders"
        ],
        "transformations": [
          "Convert view logic to dbt model"
        ],
        "priority": 3
      },
      {
        "name": "rpt_getcustomerorders",
        "source_object": "dbo.usp_GetCustomerOrders",
        "source_type": "PROCEDURE",
        "target_type": "model",
        "materialization": "table",
        "dependencies": [
          "dbo.orders"
        ],
        "transformations": [
          "Extract SELECT logic from procedure",
          "Convert to dbt SQL",
          "Add parameters as variables/macros"
        ],
        "priority": 4
      },
      {
        "name": "rpt_calculaterevenue",
        "source_object": "dbo.usp_CalculateRevenue",
        "source_type": "PROCEDURE",
        "target_type": "model",
        "materialization": "table",
        "dependencies": [
          "dbo.order_items",
          "dbo.orders",
          "dbo.products"
        ],
        "transformations": [
          "Extract SELECT logic from procedure",
          "Convert to dbt SQL",
          "Add parameters as variables/macros"
        ],
        "priority": 4
      }
    ],
    "execution_order": [
      "stg_customers",
      "stg_products",
      "stg_order_items",
      "stg_orders",
      "stg_vw_customer_orders",
      "rpt_calculaterevenue",
      "rpt_getcustomerorders"
    ],
    "naming_conventions": {
      "sources": "src_<system>_<table>",
      "staging": "stg_<table>",
      "intermediate": "int_<description>",
      "marts": "fct_<entity> or dim_<entity>"
    },
    "transformations": {}
  },
  "metadata": {
    "tables": [
      {
        "schema": "dbo",
        "name": "customers",
        "object_type": "USER_TABLE",
        "columns": [
          {
            "name": "customer_id",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "customer_name",
            "data_type": "varchar",
            "is_nullable": false,
            "max_length": 100,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "email",
            "data_type": "varchar",
            "is_nullable": true,
            "max_length": 255,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "created_at",
            "data_type": "datetime",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "updated_at",
            "data_type": "datetime",
            "is_nullable": true,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          }
        ],
        "row_count": 50000,
        "dependencies": []
      },
      {
        "schema": "dbo",
        "name": "orders",
        "object_type": "USER_TABLE",
        "columns": [
          {
            "name": "order_id",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "customer_id",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "order_date",
            "data_type": "datetime",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "total_amount",
            "data_type": "decimal",
            "is_nullable": false,
            "max_length": null,
            "precision": 10,
            "scale": 2,
            "default_value": null
          },
          {
            "name": "status",
            "data_type": "varchar",
            "is_nullable": false,
            "max_length": 50,
            "precision": null,
            "scale": null,
            "default_value": null
          }
        ],
        "row_count": 150000,
        "dependencies": [
          "dbo.customers"
        ]
      },
      {
        "schema": "dbo",
        "name": "order_items",
        "object_type": "USER_TABLE",
        "columns": [
          {
            "name": "order_item_id",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "order_id",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "product_id",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "quantity",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "unit_price",
            "data_type": "decimal",
            "is_nullable": false,
            "max_length": null,
            "precision": 10,
            "scale": 2,
            "default_value": null
          }
        ],
        "row_count": 400000,
        "dependencies": [
          "dbo.orders",
          "dbo.products"
        ]
      },
      {
        "schema": "dbo",
        "name": "products",
        "object_type": "USER_TABLE",
        "columns": [
          {
            "name": "product_id",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "product_name",
            "data_type": "varchar",
            "is_nullable": false,
            "max_length": 200,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "category",
            "data_type": "varchar",
            "is_nullable": true,
            "max_length": 100,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "price",
            "data_type": "decimal",
            "is_nullable": false,
            "max_length": null,
            "precision": 10,
            "scale": 2,
            "default_value": null
          }
        ],
        "row_count": 5000,
        "dependencies": []
      },
      {
        "schema": "dbo",
        "name": "vw_customer_orders",
        "object_type": "VIEW",
        "columns": [
          {
            "name": "customer_id",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "customer_name",
            "data_type": "varchar",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "order_count",
            "data_type": "int",
            "is_nullable": false,
            "max_length": null,
            "precision": null,
            "scale": null,
            "default_value": null
          },
          {
            "name": "total_spent",
            "data_type": "decimal",
            "is_nullable": false,
            "max_length": null,
            "precision": 10,
            "scale": 2,
            "default_value": null
          }
        ],
        "row_count": null,
        "dependencies": [
          "dbo.customers",
          "dbo.orders"
        ]
      }
    ],
    "stored_procedures": [
      {
        "schema": "dbo",
        "name": "usp_GetCustomerOrders",
        "definition": "\nCREATE PROCEDURE dbo.usp_GetCustomerOrders\n    @customer_id INT\nAS\nBEGIN\n    SELECT \n        o.order_id,\n        o.order_date,\n        o.total_amount,\n        o.status\n    FROM dbo.orders o\n    WHERE o.customer_id = @customer_id\n    ORDER BY o.order_date DESC\nEND\n                ",
        "parameters": [
          {
            "name": "@customer_id",
            "data_type": "int",
            "is_output": false
          }
        ],
        "dependencies": [
          "dbo.orders"
        ]
      },
      {
        "schema": "dbo",
        "name": "usp_CalculateRevenue",
        "definition": "\nCREATE PROCEDURE dbo.usp_CalculateRevenue\n    @start_date DATETIME,\n    @end_date DATETIME\nAS\nBEGIN\n    SELECT \n        p.category,\n        SUM(oi.quantity * oi.unit_price) as total_revenue\n    FROM dbo.order_items oi\n    INNER JOIN dbo.orders o ON oi.order_id = o.order_id\n    INNER JOIN dbo.products p ON oi.product_id = p.product_id\n    WHERE o.order_date BETWEEN @start_date AND @end_date\n    GROUP BY p.category\nEND\n                ",
        "parameters": [
          {
            "name": "@start_date",
            "data_type": "datetime",
            "is_output": false
          },
          {
            "name": "@end_date",
            "data_type": "datetime",
            "is_output": false
          }
        ],
        "dependencies": [
          "dbo.order_items",
          "dbo.orders",
          "dbo.products"
        ]
      }
    ],
    "dependencies": [
      {
        "source_schema": "dbo",
        "source_name": "orders",
        "target_schema": "dbo",
        "target_name": "customers",
        "dependency_type": "SELECT"
      },
      {
        "source_schema": "dbo",
        "source_name": "order_items",
        "target_schema": "dbo",
        "target_name": "orders",
        "dependency_type": "SELECT"
      },
      {
        "source_schema": "dbo",
        "source_name": "order_items",
        "target_schema": "dbo",
        "target_name": "products",
        "dependency_type": "SELECT"
      },
      {
        "source_schema": "dbo",
        "source_name": "vw_customer_orders",
        "target_schema": "dbo",
        "target_name": "customers",
        "dependency_type": "SELECT"
      },
      {
        "source_schema": "dbo",
        "source_name": "vw_customer_orders",
        "target_schema": "dbo",
        "target_name": "orders",
        "dependency_type": "SELECT"
      },
      {
        "source_schema": "dbo",
        "source_name": "usp_GetCustomerOrders",
        "target_schema": "dbo",
        "target_name": "orders",
        "dependency_type": "SELECT"
      },
      {
        "source_schema": "dbo",
        "source_name": "usp_CalculateRevenue",
        "target_schema": "dbo",
        "target_name": "order_items",
        "dependency_type": "SELECT"
      },
      {
        "source_schema": "dbo",
        "source_name": "usp_CalculateRevenue",
        "target_schema": "dbo",
        "target_name": "orders",
        "dependency_type": "SELECT"
      },
      {
        "source_schema": "dbo",
        "source_name": "usp_CalculateRevenue",
        "target_schema": "dbo",
        "target_name": "products",
        "dependency_type": "SELECT"
      }
    ],
    "summary": {
      "total_tables": 4,
      "total_views": 1,
      "total_procedures": 2,
      "total_dependencies": 9
    }
  },
  "project_path": "./test_langgraph_project",
  "errors": [],
  "started_at": "2025-11-24T14:05:56.553171",
  "completed_at": null,
  "max_retries": 3,
  "current_retry": 0
}